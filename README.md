# Tango Pass

Minimal lesson pass tracker built for Cloudflare Workers + D1 + Pages.

## Local Development
1. Install Wrangler.
2. Create a local D1 DB and apply migrations:
   - `wrangler d1 create tango-pass`
   - Update `wrangler.toml` with the returned database ID.
   - `wrangler d1 migrations apply tango-pass --local`
3. Set admin token for local dev:
   - `printf "%s" "your-admin-token" | wrangler secret put ADMIN_TOKEN`
4. Run locally:
   - `wrangler dev`

## Testing Deployment
- Run `ADMIN_TOKEN=... ./deploy-test.sh` to deploy Worker + Pages to the testing environment.
- Optionally set `TEST_WORKER_URL` if the script cannot detect the Worker URL.
- Testing URL: `https://solotango-test.pages.dev`.

## Teacher UI
- Teacher console is at `/teacher` on the Pages domain.

## Production Deployment
- Create a production environment in `wrangler.toml` and deploy via Wrangler (not scripted yet).

## Tokens
- Admin token is configured as a Worker secret (`ADMIN_TOKEN`).
- Student tokens are generated by `/admin/addStudent` and shared via `?t=TOKEN`.

## Docs
- Architecture: `architecture.md`
- DB rules: `db.md`
- API notes: `api.md`
- Deployment: `deployment.md`
- Testing: `testing.md`
- Decisions: `decisions.md`
- Backups: `backups.md`
